{"ast":null,"code":"import _objectSpread from\"C:/Users/datej/OneDrive/Desktop/zavrsni/DEX-ETH/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"C:/Users/datej/OneDrive/Desktop/zavrsni/DEX-ETH/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useRef,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Curve=function Curve(props){var ref=useRef();useEffect(function(){var canvas=ref.current;var textSize=16;var width=canvas.width;var height=canvas.height;if(canvas.getContext&&props.ethReserve&&props.tokenReserve){var k=props.ethReserve*props.tokenReserve;var ctx=canvas.getContext('2d');ctx.clearRect(0,0,width,height);var maxX=k/(props.ethReserve/4);var minX=0;if(props.addingEth||props.addingToken){maxX=k/(props.ethReserve*0.4);//maxX = k/(props.ethReserve*0.8)\nminX=k/Math.max(0,5000000000-props.ethReserve/100);}var maxY=maxX*height/width;var minY=minX*height/width;var plotX=function plotX(x){return(x-minX)/(maxX-minX)*width;};var plotY=function plotY(y){return height-(y-minY)/(maxY-minY)*height;};ctx.strokeStyle=\"#000000\";ctx.fillStyle=\"#000000\";ctx.font=textSize+\"px Arial\";// +Y axis\nctx.beginPath();ctx.moveTo(plotX(minX),plotY(0));ctx.lineTo(plotX(minX),plotY(maxY));ctx.stroke();// +X axis\nctx.beginPath();ctx.moveTo(plotX(0),plotY(minY));ctx.lineTo(plotX(maxX),plotY(minY));ctx.stroke();ctx.lineWidth=2;ctx.beginPath();var first=true;for(var x=minX;x<=maxX;x+=maxX/width){/////\nvar y=k/x;/////\nif(first){ctx.moveTo(plotX(x),plotY(y));first=false;}else{ctx.lineTo(plotX(x),plotY(y));}}ctx.stroke();ctx.lineWidth=2;if(props.addingEth){var newEthReserve=props.ethReserve+parseFloat(props.addingEth);ctx.fillStyle=\"#bbbbbb\";ctx.beginPath();ctx.arc(plotX(newEthReserve),plotY(k/newEthReserve),5,0,2*Math.PI);ctx.fill();ctx.strokeStyle=\"#009900\";drawArrow(ctx,plotX(props.ethReserve),plotY(props.tokenReserve),plotX(newEthReserve),plotY(props.tokenReserve));ctx.fillStyle=\"#000000\";ctx.fillText(\"\"+props.addingEth+\" ETH input\",plotX(props.ethReserve)+textSize,plotY(props.tokenReserve)-textSize);ctx.strokeStyle=\"#990000\";drawArrow(ctx,plotX(newEthReserve),plotY(props.tokenReserve),plotX(newEthReserve),plotY(k/newEthReserve));var amountGained=Math.round(10000*(props.addingEth*props.tokenReserve)/newEthReserve)/10000;ctx.fillStyle=\"#000000\";ctx.fillText(\"\"+amountGained+\" FESB output (-1% fee)\",plotX(newEthReserve)+textSize,plotY(k/newEthReserve));}else if(props.addingToken){var newTokenReserve=props.tokenReserve+parseFloat(props.addingToken);ctx.fillStyle=\"#bbbbbb\";ctx.beginPath();ctx.arc(plotX(k/newTokenReserve),plotY(newTokenReserve),5,0,2*Math.PI);ctx.fill();//console.log(\"newTokenReserve\",newTokenReserve)\nctx.strokeStyle=\"#990000\";drawArrow(ctx,plotX(props.ethReserve),plotY(props.tokenReserve),plotX(props.ethReserve),plotY(newTokenReserve));ctx.fillStyle=\"#000000\";ctx.fillText(\"\"+props.addingToken+\" FESB input\",plotX(props.ethReserve)+textSize,plotY(props.tokenReserve));ctx.strokeStyle=\"#009900\";drawArrow(ctx,plotX(props.ethReserve),plotY(newTokenReserve),plotX(k/newTokenReserve),plotY(newTokenReserve));var _amountGained=Math.round(10000*(props.addingToken*props.ethReserve)/newTokenReserve)/10000;//console.log(\"amountGained\",amountGained)\nctx.fillStyle=\"#000000\";ctx.fillText(\"\"+_amountGained+\" ETH output (-0.3% fee)\",plotX(k/newTokenReserve)+textSize,plotY(newTokenReserve)-textSize);}ctx.fillStyle=\"#0000FF\";ctx.beginPath();ctx.arc(plotX(props.ethReserve),plotY(props.tokenReserve),5,0,2*Math.PI);ctx.fill();}},[props]);var addingEth=props.addingEth,addingToken=props.addingToken,ethReserve=props.ethReserve,tokenReserve=props.tokenReserve,rest=_objectWithoutProperties(props,[\"addingEth\",\"addingToken\",\"ethReserve\",\"tokenReserve\"]);return/*#__PURE__*/_jsxs(\"div\",{style:{margin:45,position:'relative',width:props.width,height:props.height},children:[/*#__PURE__*/_jsx(\"canvas\",_objectSpread({style:{position:'absolute',left:0,top:0},ref:ref},rest)),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:\"20%\",bottom:-30},children:\"-- ETH Reserve --\"}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:-30,bottom:\"20%\",transform:\"rotate(-90deg)\",transformOrigin:\"0 0\"},children:\"-- FESB Reserve --\"})]});};export default Curve;var drawArrow=function drawArrow(ctx,x1,y1,x2,y2){var dx=x1-x2,dy=y1-y2;var norm=Math.sqrt(dx*dx+dy*dy);var udx=dx/norm,udy=dy/norm;var size=norm/7;ctx.beginPath();ctx.moveTo(x1,y1);ctx.lineTo(x2,y2);ctx.stroke();ctx.moveTo(x2,y2);ctx.lineTo(x2+udx*size-udy*size,y2+udx*size+udy*size);ctx.moveTo(x2,y2);ctx.lineTo(x2+udx*size+udy*size,y2-udx*size+udy*size);ctx.stroke();};","map":{"version":3,"sources":["C:/Users/datej/OneDrive/Desktop/zavrsni/DEX-ETH/src/components/Curve.js"],"names":["React","useRef","useEffect","Curve","props","ref","canvas","current","textSize","width","height","getContext","ethReserve","tokenReserve","k","ctx","clearRect","maxX","minX","addingEth","addingToken","Math","max","maxY","minY","plotX","x","plotY","y","strokeStyle","fillStyle","font","beginPath","moveTo","lineTo","stroke","lineWidth","first","newEthReserve","parseFloat","arc","PI","fill","drawArrow","fillText","amountGained","round","newTokenReserve","rest","margin","position","left","top","bottom","transform","transformOrigin","x1","y1","x2","y2","dx","dy","norm","sqrt","udx","udy","size"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\r\n\r\nconst Curve = (props) => {\r\n  let ref = useRef();\r\n\r\n  useEffect(() => {\r\n    let canvas = ref.current;\r\n\r\n    const textSize = 16\r\n\r\n    const width = canvas.width ;\r\n    const height = canvas.height ;\r\n\r\n    if (canvas.getContext && props.ethReserve && props.tokenReserve) {\r\n\r\n      const k = props.ethReserve * props.tokenReserve\r\n\r\n      const ctx = canvas.getContext('2d');\r\n      ctx.clearRect(0,0,width,height);\r\n\r\n      let maxX = k/(props.ethReserve/4)\r\n      let minX = 0\r\n\r\n      if(props.addingEth||props.addingToken){\r\n        maxX = k/(props.ethReserve*0.4)\r\n        //maxX = k/(props.ethReserve*0.8)\r\n        minX = k/Math.max(0,(5000000000-props.ethReserve/100))\r\n      }\r\n\r\n      const maxY = maxX * height / width;\r\n      const minY = minX * height / width;\r\n\r\n      const plotX = (x)=>{\r\n        return (x - minX) / (maxX - minX) * width ;\r\n      }\r\n\r\n      const plotY = (y)=>{\r\n        return height - (y - minY) / (maxY - minY) * height ;\r\n      }\r\n      ctx.strokeStyle = \"#000000\";\r\n      ctx.fillStyle = \"#000000\";\r\n      ctx.font = textSize+\"px Arial\";\r\n      // +Y axis\r\n      ctx.beginPath() ;\r\n      ctx.moveTo(plotX(minX),plotY(0)) ;\r\n      ctx.lineTo(plotX(minX),plotY(maxY)) ;\r\n      ctx.stroke() ;\r\n      // +X axis\r\n      ctx.beginPath() ;\r\n      ctx.moveTo(plotX(0),plotY(minY)) ;\r\n      ctx.lineTo(plotX(maxX),plotY(minY)) ;\r\n      ctx.stroke() ;\r\n\r\n      ctx.lineWidth = 2 ;\r\n      ctx.beginPath() ;\r\n      let first = true\r\n      for (var x = minX; x <= maxX; x += maxX/width) {\r\n        /////\r\n        var y = k / x\r\n        /////\r\n        if (first) {\r\n          ctx.moveTo(plotX(x),plotY(y))\r\n          first = false\r\n        } else {\r\n          ctx.lineTo(plotX(x),plotY(y))\r\n        }\r\n      }\r\n      ctx.stroke() ;\r\n\r\n      ctx.lineWidth = 2 ;\r\n\r\n      if(props.addingEth){\r\n\r\n        let newEthReserve = props.ethReserve + parseFloat(props.addingEth)\r\n\r\n        ctx.fillStyle = \"#bbbbbb\";\r\n        ctx.beginPath();\r\n        ctx.arc(plotX(newEthReserve),plotY(k/(newEthReserve)), 5, 0, 2 * Math.PI);\r\n        ctx.fill();\r\n\r\n        ctx.strokeStyle = \"#009900\";\r\n        drawArrow(ctx,plotX(props.ethReserve),plotY(props.tokenReserve),plotX(newEthReserve),plotY(props.tokenReserve))\r\n\r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.fillText(\"\"+props.addingEth+\" ETH input\", plotX(props.ethReserve)+textSize, plotY(props.tokenReserve)-textSize);\r\n\r\n        ctx.strokeStyle = \"#990000\";\r\n        drawArrow(ctx,plotX(newEthReserve),plotY(props.tokenReserve),plotX(newEthReserve),plotY(k/(newEthReserve)))\r\n\r\n        let amountGained =  Math.round(10000 * ( props.addingEth * props.tokenReserve ) / ( newEthReserve ) ) /10000\r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.fillText(\"\"+(amountGained)+\" FESB output (-1% fee)\", plotX(newEthReserve)+textSize,plotY(k/(newEthReserve)));\r\n\r\n      }else if(props.addingToken){\r\n\r\n        let newTokenReserve = props.tokenReserve + parseFloat(props.addingToken)\r\n\r\n        ctx.fillStyle = \"#bbbbbb\";\r\n        ctx.beginPath();\r\n        ctx.arc(plotX(k/(newTokenReserve)),plotY(newTokenReserve), 5, 0, 2 * Math.PI);\r\n        ctx.fill();\r\n\r\n        //console.log(\"newTokenReserve\",newTokenReserve)\r\n        ctx.strokeStyle = \"#990000\";\r\n        drawArrow(ctx,plotX(props.ethReserve),plotY(props.tokenReserve),plotX(props.ethReserve),plotY(newTokenReserve))\r\n\r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.fillText(\"\"+(props.addingToken)+\" FESB input\", plotX(props.ethReserve)+textSize,plotY(props.tokenReserve));\r\n\r\n        ctx.strokeStyle = \"#009900\";\r\n        drawArrow(ctx,plotX(props.ethReserve),plotY(newTokenReserve),plotX(k/(newTokenReserve)),plotY(newTokenReserve))\r\n\r\n        let amountGained =  Math.round(10000 * ( props.addingToken * props.ethReserve ) / ( newTokenReserve ) ) /10000\r\n        //console.log(\"amountGained\",amountGained)\r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.fillText(\"\"+amountGained+\" ETH output (-0.3% fee)\", plotX(k/(newTokenReserve))+textSize,plotY(newTokenReserve)-textSize);\r\n\r\n      }\r\n\r\n      ctx.fillStyle = \"#0000FF\"\r\n      ctx.beginPath();\r\n      ctx.arc(plotX(props.ethReserve),plotY(props.tokenReserve), 5, 0, 2 * Math.PI);\r\n      ctx.fill();\r\n\r\n    }\r\n  },[props]);\r\n\r\nconst { addingEth, addingToken, ethReserve, tokenReserve, ...rest } = props\r\n\r\n  return (\r\n    <div style={{margin:45,position:'relative',width:props.width,height:props.height}}>\r\n      <canvas\r\n        style={{position:'absolute',left:0,top:0}}\r\n        ref={ref}\r\n        {...rest}\r\n      />\r\n      <div style={{position:'absolute',left:\"20%\",bottom:-30}}>\r\n        -- ETH Reserve --\r\n      </div>\r\n      <div style={{position:'absolute',left:-30,bottom:\"20%\",transform:\"rotate(-90deg)\",transformOrigin:\"0 0\"}}>\r\n        -- FESB Reserve --\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Curve;\r\n\r\n\r\nconst drawArrow = (ctx,x1,y1,x2,y2)=>{\r\n  let [dx,dy] = [x1-x2, y1-y2]\r\n  let norm = Math.sqrt(dx * dx + dy * dy)\r\n  let [udx, udy] = [dx/norm, dy/norm]\r\n  const size = norm/7\r\n  ctx.beginPath();\r\n  ctx.moveTo(x1,y1) ;\r\n  ctx.lineTo(x2,y2) ;\r\n  ctx.stroke() ;\r\n  ctx.moveTo(x2,y2) ;\r\n  ctx.lineTo(x2 + udx*size - udy*size,y2 + udx*size + udy*size ) ;\r\n  ctx.moveTo(x2,y2) ;\r\n  ctx.lineTo(x2 + udx*size +udy*size ,y2 - udx*size + udy*size) ;\r\n  ctx.stroke() ;\r\n}"]},"metadata":{},"sourceType":"module"}